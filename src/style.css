@tailwind base;
@tailwind components;
@tailwind utilities;

/* ──────────────────────────────────────────────────────────────────
   Design System – Light Theme (default)
   ────────────────────────────────────────────────────────────────── */
:root {
	color-scheme: light;

	/* Surfaces */
	--ion-background-color: #f4f6f9;
	--ion-background-color-rgb: 244, 246, 249;
	--ion-card-background: rgba(255, 255, 255, 0.55);
	--ion-card-background-rgb: 255, 255, 255;
	--ion-item-background: rgba(255, 255, 255, 0.4);
	--ion-item-background-rgb: 255, 255, 255;

	/* Glass tokens */
	--glass-blur: 20px;
	--glass-saturation: 1.6;
	--glass-border: rgba(255, 255, 255, 0.5);
	--glass-border-bottom: rgba(255, 255, 255, 0.15);
	--glass-shadow: 0 8px 32px rgba(99, 102, 241, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04);
	--glass-highlight: inset 0 1px 0 rgba(255, 255, 255, 0.7), inset 0 -1px 0 rgba(255, 255, 255, 0.1);
	--glass-specular: linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.05) 40%, transparent 60%);
	--glass-inner-glow: inset 0 0 20px rgba(255, 255, 255, 0.08);
	--liquid-transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);

	/* Text */
	--ion-text-color: #111827;
	--ion-text-color-rgb: 17, 24, 39;

	/* Brand */
	--ion-color-primary: #6366f1;
	--ion-color-primary-rgb: 99, 102, 241;
	--ion-color-primary-contrast: #ffffff;
	--ion-color-primary-contrast-rgb: 255, 255, 255;
	--ion-color-primary-shade: #5457d5;
	--ion-color-primary-tint: #7375f2;

	--ion-color-secondary: #06b6d4;
	--ion-color-secondary-rgb: 6, 182, 212;
	--ion-color-secondary-contrast: #ffffff;
	--ion-color-secondary-contrast-rgb: 255, 255, 255;
	--ion-color-secondary-shade: #05a0bb;
	--ion-color-secondary-tint: #1fbdd8;

	--ion-color-tertiary: #8b5cf6;
	--ion-color-tertiary-rgb: 139, 92, 246;
	--ion-color-tertiary-contrast: #ffffff;
	--ion-color-tertiary-contrast-rgb: 255, 255, 255;
	--ion-color-tertiary-shade: #7a51d8;
	--ion-color-tertiary-tint: #976cf7;

	--ion-color-success: #10b981;
	--ion-color-success-rgb: 16, 185, 129;
	--ion-color-success-contrast: #ffffff;
	--ion-color-success-contrast-rgb: 255, 255, 255;
	--ion-color-success-shade: #0ea372;
	--ion-color-success-tint: #28c08e;

	--ion-color-warning: #f59e0b;
	--ion-color-warning-rgb: 245, 158, 11;
	--ion-color-warning-contrast: #000000;
	--ion-color-warning-contrast-rgb: 0, 0, 0;
	--ion-color-warning-shade: #d88b0a;
	--ion-color-warning-tint: #f6a823;

	--ion-color-danger: #ef4444;
	--ion-color-danger-rgb: 239, 68, 68;
	--ion-color-danger-contrast: #ffffff;
	--ion-color-danger-contrast-rgb: 255, 255, 255;
	--ion-color-danger-shade: #d23c3c;
	--ion-color-danger-tint: #f15757;

	--ion-color-medium: #6b7280;
	--ion-color-medium-rgb: 107, 114, 128;
	--ion-color-medium-contrast: #ffffff;
	--ion-color-medium-contrast-rgb: 255, 255, 255;
	--ion-color-medium-shade: #5e6470;
	--ion-color-medium-tint: #7a808d;

	--ion-color-light: #e5e7eb;
	--ion-color-light-rgb: 229, 231, 235;
	--ion-color-light-contrast: #111827;
	--ion-color-light-contrast-rgb: 17, 24, 39;
	--ion-color-light-shade: #cacdd2;
	--ion-color-light-tint: #e8eaed;

	/* Toolbar */
	--ion-toolbar-background: rgba(255, 255, 255, 0.6);
	--ion-toolbar-color: #111827;
	--ion-tab-bar-background: rgba(255, 255, 255, 0.6);
	--ion-tab-bar-color: #6b7280;
	--ion-tab-bar-color-selected: #6366f1;

	/* Step colors (for Ionic internals) */
	--ion-color-step-50: #f0f1f3;
	--ion-color-step-100: #e1e3e7;
	--ion-color-step-150: #d2d5da;
	--ion-color-step-200: #c3c7ce;
	--ion-color-step-250: #b4b9c2;
	--ion-color-step-300: #a5abb5;
	--ion-color-step-350: #969da9;
	--ion-color-step-400: #878f9d;
	--ion-color-step-450: #798190;
	--ion-color-step-500: #6a7384;
	--ion-color-step-550: #5b6578;
	--ion-color-step-600: #4c576b;
	--ion-color-step-650: #3d495f;
	--ion-color-step-700: #2e3b52;
	--ion-color-step-750: #202d46;
	--ion-color-step-800: #111f3a;
	--ion-color-step-850: #07142e;
	--ion-color-step-900: #030d24;
	--ion-color-step-950: #010818;
}

/* ──────────────────────────────────────────────────────────────────
   Design System – Dark Theme
   ────────────────────────────────────────────────────────────────── */
html.dark,
body.dark {
	color-scheme: dark;

	/* Surfaces */
	--ion-background-color: #0f1117;
	--ion-background-color-rgb: 15, 17, 23;
	--ion-card-background: rgba(23, 25, 35, 0.5);
	--ion-card-background-rgb: 23, 25, 35;
	--ion-item-background: rgba(23, 25, 35, 0.4);
	--ion-item-background-rgb: 23, 25, 35;

	/* Glass tokens */
	--glass-blur: 24px;
	--glass-saturation: 1.8;
	--glass-border: rgba(255, 255, 255, 0.1);
	--glass-border-bottom: rgba(255, 255, 255, 0.04);
	--glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.35), 0 2px 8px rgba(0, 0, 0, 0.2);
	--glass-highlight: inset 0 1px 0 rgba(255, 255, 255, 0.08), inset 0 -1px 0 rgba(255, 255, 255, 0.02);
	--glass-specular: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.02) 40%, transparent 60%);
	--glass-inner-glow: inset 0 0 20px rgba(129, 140, 248, 0.04);
	--liquid-transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);

	/* Text */
	--ion-text-color: #f1f5f9;
	--ion-text-color-rgb: 241, 245, 249;

	/* Brand (slightly lifted for dark bg contrast) */
	--ion-color-primary: #818cf8;
	--ion-color-primary-rgb: 129, 140, 248;
	--ion-color-primary-contrast: #000000;
	--ion-color-primary-contrast-rgb: 0, 0, 0;
	--ion-color-primary-shade: #727bda;
	--ion-color-primary-tint: #8e97f9;

	--ion-color-secondary: #22d3ee;
	--ion-color-secondary-rgb: 34, 211, 238;
	--ion-color-secondary-contrast: #000000;
	--ion-color-secondary-contrast-rgb: 0, 0, 0;
	--ion-color-secondary-shade: #1ebad1;
	--ion-color-secondary-tint: #38d7f0;

	--ion-color-tertiary: #a78bfa;
	--ion-color-tertiary-rgb: 167, 139, 250;
	--ion-color-tertiary-contrast: #000000;
	--ion-color-tertiary-contrast-rgb: 0, 0, 0;
	--ion-color-tertiary-shade: #937adc;
	--ion-color-tertiary-tint: #b097fb;

	--ion-color-success: #34d399;
	--ion-color-success-rgb: 52, 211, 153;
	--ion-color-success-contrast: #000000;
	--ion-color-success-contrast-rgb: 0, 0, 0;
	--ion-color-success-shade: #2dba87;
	--ion-color-success-tint: #48d7a3;

	--ion-color-warning: #fbbf24;
	--ion-color-warning-rgb: 251, 191, 36;
	--ion-color-warning-contrast: #000000;
	--ion-color-warning-contrast-rgb: 0, 0, 0;
	--ion-color-warning-shade: #dda820;
	--ion-color-warning-tint: #fbc53a;

	--ion-color-danger: #f87171;
	--ion-color-danger-rgb: 248, 113, 113;
	--ion-color-danger-contrast: #000000;
	--ion-color-danger-contrast-rgb: 0, 0, 0;
	--ion-color-danger-shade: #da6363;
	--ion-color-danger-tint: #f97f7f;

	--ion-color-dark: #f4f5f8;
	--ion-color-dark-rgb: 244, 245, 248;
	--ion-color-dark-contrast: #000000;
	--ion-color-dark-contrast-rgb: 0, 0, 0;
	--ion-color-dark-shade: #d7d8da;
	--ion-color-dark-tint: #f5f6f9;

	--ion-color-medium: #94a3b8;
	--ion-color-medium-rgb: 148, 163, 184;
	--ion-color-medium-contrast: #0f172a;
	--ion-color-medium-contrast-rgb: 15, 23, 42;
	--ion-color-medium-shade: #64748b;
	--ion-color-medium-tint: #cbd5e1;

	--ion-color-light: #1e293b;
	--ion-color-light-rgb: 30, 41, 59;
	--ion-color-light-contrast: #ffffff;
	--ion-color-light-contrast-rgb: 255, 255, 255;
	--ion-color-light-shade: #0f172a;
	--ion-color-light-tint: #334155;

	/* Toolbar */
	--ion-toolbar-background: rgba(23, 25, 35, 0.6);
	--ion-toolbar-color: #f1f5f9;
	--ion-tab-bar-background: rgba(23, 25, 35, 0.6);
	--ion-tab-bar-color: #94a3b8;
	--ion-tab-bar-color-selected: #818cf8;

	/* Step colors */
	--ion-color-step-50: #1a1c28;
	--ion-color-step-100: #252839;
	--ion-color-step-150: #30344a;
	--ion-color-step-200: #3b405b;
	--ion-color-step-250: #464c6c;
	--ion-color-step-300: #51587d;
	--ion-color-step-350: #5d648e;
	--ion-color-step-400: #68709f;
	--ion-color-step-450: #737cb0;
	--ion-color-step-500: #7e88c1;
	--ion-color-step-550: #8994d2;
	--ion-color-step-600: #94a0e3;
	--ion-color-step-650: #a0abec;
	--ion-color-step-700: #abb7f0;
	--ion-color-step-750: #b6c3f3;
	--ion-color-step-800: #c1cff6;
	--ion-color-step-850: #ccdbf9;
	--ion-color-step-900: #d7e7fc;
	--ion-color-step-950: #e3f0fe;

	--ion-item-background: transparent;
	--ion-item-color: #f1f5f9;
	--ion-placeholder-color: #64748b;
}

/* ──────────────────────────────────────────────────────────────────
   Theme Transitions (liquid feel)
   ────────────────────────────────────────────────────────────────── */
body,
ion-content,
ion-card,
ion-toolbar,
ion-item,
ion-tab-bar {
	transition: var(--liquid-transition);
}

/* ──────────────────────────────────────────────────────────────────
   Animated Mesh Background
   ────────────────────────────────────────────────────────────────── */
body::before {
	content: '';
	position: fixed;
	inset: -20%;
	z-index: -1;
	background:
		radial-gradient(ellipse 80% 60% at 10% 20%, rgba(99, 102, 241, 0.18) 0%, transparent 55%),
		radial-gradient(ellipse 60% 80% at 90% 80%, rgba(6, 182, 212, 0.14) 0%, transparent 55%),
		radial-gradient(ellipse 70% 50% at 50% 50%, rgba(139, 92, 246, 0.10) 0%, transparent 55%),
		radial-gradient(ellipse 50% 40% at 80% 10%, rgba(16, 185, 129, 0.08) 0%, transparent 50%),
		radial-gradient(ellipse 40% 60% at 30% 70%, rgba(245, 158, 11, 0.06) 0%, transparent 50%);
	animation: meshFloat 25s ease-in-out infinite alternate;
	pointer-events: none;
}

html.dark body::before {
	background:
		radial-gradient(ellipse 80% 60% at 10% 20%, rgba(129, 140, 248, 0.14) 0%, transparent 55%),
		radial-gradient(ellipse 60% 80% at 90% 80%, rgba(34, 211, 238, 0.10) 0%, transparent 55%),
		radial-gradient(ellipse 70% 50% at 50% 50%, rgba(167, 139, 250, 0.08) 0%, transparent 55%),
		radial-gradient(ellipse 50% 40% at 80% 10%, rgba(52, 211, 153, 0.06) 0%, transparent 50%),
		radial-gradient(ellipse 40% 60% at 30% 70%, rgba(251, 191, 36, 0.03) 0%, transparent 50%);
}

@keyframes meshFloat {
	0% {
		transform: scale(1) translate(0, 0) rotate(0deg);
	}
	25% {
		transform: scale(1.06) translate(-3%, 2%) rotate(0.5deg);
	}
	50% {
		transform: scale(0.97) translate(2%, -1%) rotate(-0.3deg);
	}
	75% {
		transform: scale(1.03) translate(-1%, 3%) rotate(0.2deg);
	}
	100% {
		transform: scale(1.01) translate(1%, -2%) rotate(-0.1deg);
	}
}

/* ──────────────────────────────────────────────────────────────────
   Glassmorphism Primitives (enhanced liquid)
   ────────────────────────────────────────────────────────────────── */
.glass-panel {
	background: rgba(var(--ion-background-color-rgb), 0.55) !important;
	backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	-webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	border: 1px solid var(--glass-border);
	border-bottom-color: var(--glass-border-bottom);
	box-shadow: var(--glass-shadow), var(--glass-highlight), var(--glass-inner-glow);
}

.glass-card {
	--background: rgba(var(--ion-card-background-rgb), 0.4);
	backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	-webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	border: 1px solid var(--glass-border) !important;
	border-bottom-color: var(--glass-border-bottom) !important;
	box-shadow: var(--glass-shadow), var(--glass-highlight), var(--glass-inner-glow);
}

ion-card.status-card {
	--background: rgba(var(--ion-item-background-rgb), 0.35);
	backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	-webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	border: 1px solid var(--glass-border);
	border-bottom-color: var(--glass-border-bottom);
}

/* ──────────────────────────────────────────────────────────────────
   Global Liquid Glass – All ion-cards
   ────────────────────────────────────────────────────────────────── */
ion-card {
	--background: rgba(var(--ion-card-background-rgb), 0.4);
	background: rgba(var(--ion-card-background-rgb), 0.4);
	backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	-webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	border: 1px solid var(--glass-border) !important;
	border-bottom-color: var(--glass-border-bottom) !important;
	border-radius: 18px;
	box-shadow: var(--glass-shadow), var(--glass-highlight), var(--glass-inner-glow);
	overflow: hidden;
	position: relative;
	transition: var(--liquid-transition);
}

/* Specular highlight overlay */
ion-card::before {
	content: '';
	position: absolute;
	inset: 0;
	background: var(--glass-specular);
	border-radius: inherit;
	pointer-events: none;
	z-index: 0;
	opacity: 1;
	transition: opacity 0.4s ease;
}

ion-card > * {
	position: relative;
	z-index: 1;
}

ion-card:hover {
	transform: translateY(-2px);
	box-shadow: 0 16px 48px rgba(99, 102, 241, 0.14), 0 4px 12px rgba(0, 0, 0, 0.06), var(--glass-highlight), var(--glass-inner-glow);
	border-color: rgba(255, 255, 255, 0.6) !important;
}

html.dark ion-card:hover {
	box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3), var(--glass-highlight), var(--glass-inner-glow);
	border-color: rgba(255, 255, 255, 0.14) !important;
}

/* ──────────────────────────────────────────────────────────────────
   Glassy Toolbar & Tab Bar
   ────────────────────────────────────────────────────────────────── */
ion-toolbar {
	--background: var(--ion-toolbar-background);
	backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	-webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	border-bottom: 1px solid var(--glass-border-bottom);
	box-shadow: var(--glass-highlight);
}

ion-tab-bar {
	backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	-webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
	border-top: 1px solid var(--glass-border);
	box-shadow: inset 0 1px 0 var(--glass-border);
}

/* ──────────────────────────────────────────────────────────────────
   Glassy Segments
   ────────────────────────────────────────────────────────────────── */
ion-segment {
	background: rgba(var(--ion-card-background-rgb), 0.25);
	border-radius: 14px;
	border: 1px solid var(--glass-border);
	backdrop-filter: blur(12px) saturate(1.3);
	-webkit-backdrop-filter: blur(12px) saturate(1.3);
	box-shadow: var(--glass-inner-glow);
	padding: 3px;
}

ion-segment-button {
	--indicator-color: rgba(var(--ion-color-primary-rgb), 0.18);
	--background-checked: rgba(var(--ion-color-primary-rgb), 0.12);
	border-radius: 11px;
	transition: var(--liquid-transition);
	--indicator-box-shadow: 0 2px 8px rgba(var(--ion-color-primary-rgb), 0.15);
}

/* ──────────────────────────────────────────────────────────────────
   Glassy Alerts & Modals (deep frosted)
   ────────────────────────────────────────────────────────────────── */
ion-alert .alert-wrapper,
ion-action-sheet .action-sheet-wrapper {
	backdrop-filter: blur(30px) saturate(1.8);
	-webkit-backdrop-filter: blur(30px) saturate(1.8);
	background: rgba(var(--ion-card-background-rgb), 0.65) !important;
	border: 1px solid var(--glass-border);
	border-radius: 22px;
	box-shadow: 0 24px 80px rgba(0, 0, 0, 0.15), var(--glass-highlight);
}

/* ──────────────────────────────────────────────────────────────────
   Glassy Buttons (liquid touch)
   ────────────────────────────────────────────────────────────────── */
ion-button {
	--border-radius: 14px;
	--box-shadow: var(--glass-shadow);
	transition: var(--liquid-transition);
}

ion-button[fill="outline"],
ion-button[fill="clear"] {
	backdrop-filter: blur(10px) saturate(1.3);
	-webkit-backdrop-filter: blur(10px) saturate(1.3);
}

ion-button:hover {
	--box-shadow: 0 8px 24px rgba(var(--ion-color-primary-rgb), 0.2);
}

/* ──────────────────────────────────────────────────────────────────
   Glassy Chips & Badges
   ────────────────────────────────────────────────────────────────── */
ion-chip {
	backdrop-filter: blur(10px) saturate(1.3);
	-webkit-backdrop-filter: blur(10px) saturate(1.3);
	border: 1px solid var(--glass-border);
	box-shadow: var(--glass-highlight);
}

ion-badge {
	backdrop-filter: blur(8px) saturate(1.2);
	-webkit-backdrop-filter: blur(8px) saturate(1.2);
	box-shadow: var(--glass-highlight);
}

/* ──────────────────────────────────────────────────────────────────
   Glassy Toggles & List Items
   ────────────────────────────────────────────────────────────────── */
ion-item {
	--background: var(--ion-item-background);
	transition: var(--liquid-transition);
}

ion-toggle {
	transition: var(--liquid-transition);
}

/* ──────────────────────────────────────────────────────────────────
   Glassy Toasts
   ────────────────────────────────────────────────────────────────── */
ion-toast::part(container) {
	backdrop-filter: blur(20px) saturate(1.6);
	-webkit-backdrop-filter: blur(20px) saturate(1.6);
	border: 1px solid var(--glass-border);
	border-radius: 16px;
}

/* ──────────────────────────────────────────────────────────────────
   Dark-mode Ionic Overrides
   ────────────────────────────────────────────────────────────────── */
html.dark ion-content {
	--background: var(--ion-background-color);
}

html.dark ion-card {
	--background: rgba(var(--ion-card-background-rgb), 0.4);
	--color: var(--ion-text-color);
}

html.dark ion-card-header {
	--background: rgba(var(--ion-card-background-rgb), 0.25);
}

html.dark ion-toolbar {
	--background: var(--ion-toolbar-background);
	--color: var(--ion-toolbar-color);
}

html.dark ion-item {
	--background: var(--ion-item-background);
	--color: var(--ion-item-color);
}

html.dark ion-list {
	--background: transparent;
}

/* ──────────────────────────────────────────────────────────────────
   Base / Global Styles
   ────────────────────────────────────────────────────────────────── */
body,
.ion-page,
ion-content {
	background: var(--ion-background-color);
	color: var(--ion-text-color);
}

h1, h2, h3, h4, h5, h6 {
	color: var(--ion-text-color);
}

p {
	color: var(--ion-text-color);
	opacity: 0.9;
}

.text-muted {
	color: var(--ion-color-medium);
}

ion-item {
	--background: var(--ion-item-background);
}

/* ──────────────────────────────────────────────────────────────────
   Glassy Input Fields
   ────────────────────────────────────────────────────────────────── */
ion-textarea,
ion-input,
ion-select {
	--background: rgba(var(--ion-card-background-rgb), 0.25);
	--border-radius: 12px;
}

/* ──────────────────────────────────────────────────────────────────
   Liquid Scrollbar
   ────────────────────────────────────────────────────────────────── */
::-webkit-scrollbar {
	width: 6px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background: rgba(var(--ion-text-color-rgb), 0.12);
	border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
	background: rgba(var(--ion-text-color-rgb), 0.2);
}

/* ──────────────────────────────────────────────────────────────────
   Performance: reduce blur on low-end / prefers-reduced-motion
   ────────────────────────────────────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
	body::before {
		animation: none;
	}

	*,
	*::before,
	*::after {
		transition-duration: 0.01ms !important;
		animation-duration: 0.01ms !important;
	}
}
